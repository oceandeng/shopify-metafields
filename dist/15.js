(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{273:function(e,t,a){"use strict";var n=a(2),c=a(3),i=a(6),s=a(7),o=a(0),l=a.n(o),r=a(589),d=a(249),u=a(4),h=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var c;Object(n.a)(this,a);var i=(c=t.call(this,e)).props,s=i.modalTitle,o=i.modalText;return c.state={modalOpen:!1,loading:!1,item:{},modalTitle:s,modalText:o},c}return Object(c.a)(a,[{key:"handleModalDelete",value:function(){var e=this,t=this.state.item;this.setState({loading:!0}),this.props.onModalDelete(t,(function(){e.setState({loading:!1,modalOpen:!1})}))}},{key:"handleModalOpen",value:function(e){this.setState({modalOpen:!0,item:e})}},{key:"handleModalClose",value:function(){this.setState({modalOpen:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalOpen,n=t.modalTitle,c=t.modalText,i=t.loading;return Object(u.jsx)(r.a,{open:a,title:n,primaryAction:{destructive:!0,content:"Delete",loading:i,onAction:function(){e.handleModalDelete()}},secondaryActions:[{content:"Cancel",onAction:function(){e.handleModalClose()}}],onClose:function(){e.handleModalClose()},children:Object(u.jsx)(r.a.Section,{children:Object(u.jsx)(d.a,{children:Object(u.jsx)("p",{children:c})})})})}}]),a}(l.a.Component);t.a=h},609:function(e,t,a){"use strict";a.r(t);var n=a(184),c=a(2),i=a(3),s=a(6),o=a(7),l=a(0),r=a.n(l),d=a(52),u=a(292),h=a(182),j=a(170),x=a(612),m=a(616),v=a(617),p=a(593),b=a(428),O=a(39),f=a(273),g=a(251),w=a(610),y=a(611),N=a(430),k=a(4),C=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).apiURL="".concat(window.appEnvironment.apiURL,"eximportlog"),n.state={active:!1,hasPrevious:!1,hasNext:!1,currentPage:1,loading:!0,rows:[],data:[]},n}return Object(i.a)(a,[{key:"getLog",value:function(){var e=this;this.setState({loading:!0});var t={limit:10,page:this.state.currentPage};window.axios.get(this.apiURL,{params:t}).then((function(t){var a=t.data.data,c=a.data.map((function(e){return Object(n.a)({},e)}));e.setData(c,(function(){e.setState({currentPage:a.current_page,hasPrevious:a.prev_page_url,hasNext:a.next_page_url,loading:!1})}))})).catch((function(t){e.setState({loading:!1})}))}},{key:"handleOpenConfirmModal",value:function(e){this.refs.ConfirmModal.handleModalOpen(e)}},{key:"handleDelete",value:function(e,t){var a=this;window.axios.delete("".concat(window.appEnvironment.apiURL,"eximportlog/").concat(e.id)).then((function(e){a.setState({active:!0},(function(){t&&t(),a.getLog()}))})).catch((function(e){t&&t()}))}},{key:"setData",value:function(e,t){var a=this;this.setState({data:e},(function(){var e=a.state.data.map((function(e){return[1==e.type?"Import":2==e.type?"Export":3==e.type?"Bulk_Export":4==e.type?"Bulk_Import":"",Object(k.jsx)("div",{className:"tc",style:{whiteSpace:"normal",wordBreak:"break-all"},children:e.resource}),Object(k.jsx)("div",{className:"tc",children:e.items}),a.handleCalcDate(e.created_at),a.handleCalcDate(e.updated_at),0==e.status?Object(k.jsxs)("div",{className:"tc flex-con",children:[Object(k.jsx)("div",{className:"runIcon",children:Object(k.jsx)(d.a,{source:function(){return Object(k.jsxs)("svg",{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[Object(k.jsx)("circle",{cx:"10",cy:"10",r:"10",fill:"#006fbb"}),Object(k.jsx)("circle",{cx:"10",cy:"10",r:"6",fill:"currentColor"})]})},color:"blue"})}),Object(k.jsx)(u.a,{status:"info",children:"Running"})]}):1==e.status?Object(k.jsx)("div",{className:"tc flex-box",children:Object(k.jsxs)(h.a,{spacing:"extraTight",children:[Object(k.jsx)(d.a,{source:g.a,color:"green"}),Object(k.jsx)(u.a,{status:"success",children:"Completed"})]})}):2==e.status?Object(k.jsx)("div",{className:"tc flex-box",children:Object(k.jsxs)(h.a,{spacing:"extraTight",children:[Object(k.jsx)(d.a,{source:w.a,color:"red"}),Object(k.jsx)(u.a,{status:"critical",children:"Failed"})]})}):"",1!=e.status||2!=e.type&&3!=e.type?"":Object(k.jsx)("a",{className:"url",download:!0,href:e.web_path,target:"_blank",children:Object(k.jsx)(d.a,{source:y.a})}),0!=e.status?Object(k.jsx)(j.a,{plain:!0,icon:N.a,onClick:function(){a.handleOpenConfirmModal(e)}}):""]}));a.setState({rows:e},(function(){t&&t()}))}))}},{key:"handlePageChange",value:function(e){var t=this;this.setState({currentPage:e},(function(){t.getLog()}))}},{key:"toggleActive",value:function(){this.setState({active:!this.state.active})}},{key:"handleCalcDate",value:function(e){var t=window.publicTools.clientTimeZone(),a=new Date(e).getTime(),n=60*t.hour*60*1e3+60*t.munite*1e3,c="+"==t.prefix?a+n:a-n;return window.publicTools.getExactTime(c)}},{key:"componentDidMount",value:function(){this.getLog()}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentPage,n=t.active,c=t.hasPrevious,i=t.hasNext,s=t.loading,o=t.rows;return Object(k.jsxs)(x.a,{children:[Object(k.jsx)("div",{className:"wrapper",children:Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)(m.a,{children:[Object(k.jsxs)("div",{className:"spinner-rel-body",children:[s&&Object(k.jsx)(O.a,{notFullScreen:!0}),Object(k.jsxs)("div",{className:"min-height300",children:[Object(k.jsx)(v.a,{columnContentTypes:["text","numeric","numeric","numeric","numeric","text","text"],headings:["Type",Object(k.jsx)("div",{className:"tc",children:"Resource"}),Object(k.jsx)("div",{className:"tc",children:"Items"}),Object(k.jsx)("div",{className:"tc",children:"Start At"}),Object(k.jsx)("div",{className:"tc",children:"End At"}),Object(k.jsx)("div",{className:"tc",children:"Status"}),"Download",""],rows:o}),!o.length&&!s&&Object(k.jsx)("div",{className:"tc g9 mt100 f20",children:"No Log"})]}),Object(k.jsx)(h.a,{distribution:"fill",children:Object(k.jsx)("div",{className:"section-list_footer tc",children:Object(k.jsx)(p.a,{hasPrevious:!!c,onPrevious:function(){var t=a;t>0&&t--,e.handlePageChange(t)},hasNext:!!i,onNext:function(){var t=a;i&&t++,e.handlePageChange(t)}})})})]}),n&&Object(k.jsx)(b.a,{content:"Delete Success",onDismiss:function(){e.toggleActive()}})]})})}),Object(k.jsx)(f.a,{ref:"ConfirmModal",modalTitle:"Delete this log?",modalText:"Are you sure you want to delete this log?",onModalDelete:function(t,a){e.handleDelete(t,a)}})]})}}]),a}(r.a.Component);t.default=C}}]);
//# sourceMappingURL=15.js.map